<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Nira Viewer SDK -->
<script src="https://sdk.nira.app/js/viewer.js"></script>

</head>

<body style="margin:0">

<!-- Nira iframe -->
<iframe id="niraviewer"
        frameborder="0"
        style="width:100vw;height:100vh;"
        src="https://nidaros.nira.app/a/-0lmDLkGQpSjZn4Lyv3EVg">
</iframe>

<script>

window.addEventListener("load", function () {

  if (!window.NiraAPI) {
    console.error("NiraAPI not loaded");
    return;
  }

  const viewer = new NiraAPI.Viewer(
    document.getElementById("niraviewer"),
    {
      enableObjectPicking: true
    }
  );

  viewer.on("object_picked", function (obj) {

    if (obj.objectType !== "mesh") return;

    const id = obj.sceneName + "|" + obj.objectName;

    if (window.FileMaker) {
      FileMaker.PerformScript("Test_From_Nira", id);
    } else {
      console.log("Picked:", id);
    }

  });

});

</script>

</body>
</html>

