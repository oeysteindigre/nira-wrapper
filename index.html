<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Nira â†’ FileMaker</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  overflow: hidden;
}

#container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

#niraviewer {
  width: 100%;
  height: 100%;
  border: 0;
}
</style>

<script src="https://sdk.nira.app/js/viewer.js"></script>

<script>
let niraViewer;

document.addEventListener("readystatechange", () => {
  if (document.readyState !== "interactive") return;

  niraViewer = new NiraAPI.Viewer(
    document.getElementById("niraviewer"),
    {
      showNavigationTools: true,
      showMeasureTool: false,
      showCalloutsList: false,
      showRenderModes: false,
      suppressCalloutDialog: true
    }
  );

  niraViewer.on("callout_activated", (calloutInfo) => {

    if (window.FileMaker && FileMaker.PerformScript) {
      FileMaker.PerformScript(
        "Test_From_nira",
        calloutInfo.uuid
      );
    }

  });

});
</script>
</head>

<body>

<div id="container">
  <iframe
    id="niraviewer"
    src="https://nidaros.nira.app/g/y-93qFDYS2W-8ACrlqVj8A">
  </iframe>
</div>

</body>
</html>
