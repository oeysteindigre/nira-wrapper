<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://sdk.nira.app/js/viewer.js"></script>
</head>

<body style="margin:0">

<iframe id="niraviewer"
        frameborder="0"
        style="width:100vw;height:100vh;"
        src="https://nidaros.nira.app/g/y-93qFDYS2W-8ACrlqVj8A">
</iframe>

<script>

document.addEventListener("DOMContentLoaded", function () {

  const iframe = document.getElementById("niraviewer");

  iframe.addEventListener("load", function () {

    const viewer = new NiraAPI.Viewer(iframe, {
      enableObjectPicking: true
    });

    viewer.on("callout_selected", function (callout) {

  console.log("CALLOUT:", callout);

  const id = callout.uuid;   // ← dette er nøkkelen

  if (window.FileMaker) {
    FileMaker.PerformScript("Test_From_Nira", id);
  } else {
    console.log("Callout UUID:", id);
  }

    });

  });

});

</script>


</body>
</html>


